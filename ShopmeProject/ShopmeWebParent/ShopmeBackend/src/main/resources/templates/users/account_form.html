<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragment::page_head('ShopDA - Account Information')}">
<body>
<div class="container-fluid">
  <div>
    <div th:replace="~{navigation::menu}"></div>
  </div>
  <div class="text-center m-3">
    <h2>Your Account Details</h2>
  </div>
  <div th:if="${message!=null}" class="alert-success alert text-center">
    [[${message}]]
  </div>
  <form th:action="@{/account/save}" method="post" style="max-width: 700px; margin: 0 auto"
        enctype="multipart/form-data"
        th:object="${user}">
    <input type="hidden" id="id" th:field="${user.id}">
    <input type="hidden" th:field="${user.password}">
    <div class="border border-secondary p-3 rounded">
      <div class="form-group row">
        <label class="col-sm-4 col-form-label">E-mail</label>
        <div class="col-sm-8">
          <input type="email" class="form-control" th:field="${user.email}" readonly>
        </div>
      </div>
      <div class="form-group row">
        <label class="col-sm-4 col-form-label">First Name</label>
        <div class="col-sm-8">
          <input type="text" class="form-control" th:field="${user.firstName}" required minlength="2" maxlength="45">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-sm-4 col-form-label">Last name</label>
        <div class="col-sm-8">
          <input type="text" class="form-control" th:field="${user.lastName}" required minlength="2" maxlength="45">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-sm-4 col-form-label">Vai trò: </label>
        <div class="col-sm-8 mt-2" >
          <span><b>[[${user.roles}]]</b></span>
        </div>
      </div>
      <div class="form-group row">
        <label class="col-sm-4 col-form-label">Đã kích hoạt: </label>
        <div class="col-sm-8 mt-2" >
          <input type="checkbox" class="form-check-input m-2" th:field="${user.enabled}">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-sm-4 col-form-label">Ảnh avatar: </label>
        <div class="col-sm-8" >
          <input type="hidden" th:field="${user.photos}">
          <input type="file" class="mb-2" id="fileImage" name="image" accept="image/png, image/jpeg">
          <img id="portraitImage" alt="Photos preview" th:src="@{${user.photosImagePath}}" class="img-fluid" style="width:100px"/>
        </div>
      </div>
      <div class="text-center">
        <input type="submit" value="Save" class="btn btn-info m-3"/>
        <input type="button" value="Cancel" class="btn btn-secondary" id="buttonCancel"/>
      </div>
    </div>
  </form>


  <div>
    <p class="text-center"> Shopme Admin Control Panel - Copyright &copy;Shopme</p>
  </div>
</div>
<script type="text/javascript">
  $(document).ready(function() {
    $("#buttonCancel").on("click",function (){
      window.location ="[[@{/}]]";
    });
  });
</script>
<script type="text/javascript" th:src="@{/js/fileUtils.js}"></script>
</body>
</html>